# Milestone v1.4: App Experience

**Status:** ✅ SHIPPED 2026-01-31
**Phases:** 13-15
**Total Plans:** 4

## Overview

Make PWA installation discoverable and easy, especially for iOS users. Added install banners on landing page and in-app, iOS visual walkthrough, Android native prompt integration, and settings page fallback.

## Phases

### Phase 13: Install Infrastructure

**Goal**: Browser events and platform detection work correctly
**Depends on**: None (foundation phase)
**Plans**: 2 plans

Plans:
- [x] 13-01: Schema migration + TypeScript types for PWA tracking
- [x] 13-02: API endpoints, context provider, and root layout integration

**Success Criteria:**
1. App correctly identifies iOS Safari vs Chromium browsers on all devices ✓
2. App correctly detects when user is viewing in standalone/PWA mode ✓
3. beforeinstallprompt event is captured globally before any component mounts ✓
4. Dismissal state persists across browser sessions permanently ✓
5. Install prompts never show to users who already installed the app ✓

---

### Phase 14: Landing Page Install Experience

**Goal**: First-time visitors can discover and install the PWA
**Depends on**: Phase 13 (requires context provider and platform detection)
**Plans**: 1 plan

Plans:
- [x] 14-01: PWA install banner UI with iOS walkthrough modal

**Success Criteria:**
1. Visitor on Android Chrome sees install banner with native prompt button ✓
2. Visitor on iOS Safari sees install banner with "Show me how" button ✓
3. iOS user clicking "Show me how" sees visual walkthrough with Share icon and step-by-step instructions in Dutch ✓
4. Android user clicking "Install" triggers native browser install dialog ✓
5. User clicking dismiss button permanently hides banner for that device ✓

---

### Phase 15: In-App Install Access

**Goal**: Logged-in users can install from inside the app
**Depends on**: Phase 13 (requires context provider), Phase 14 (benefits from UI patterns)
**Plans**: 1 plan

Plans:
- [x] 15-01: In-app install banner and settings card

**Success Criteria:**
1. Logged-in user sees install banner on app pages (not just landing page) ✓
2. Settings page shows "Install app" card between Account and Daily Target sections ✓
3. Settings install button works even after banner was dismissed ✓
4. Settings button triggers correct action for user's platform (native prompt for Android, walkthrough for iOS) ✓

---

## Milestone Summary

**Key Decisions:**
- Root provider pattern for beforeinstallprompt event capture (prevents timing race condition)
- Database storage for dismissal state (iOS localStorage evicts after 7 days)
- Zero new dependencies (native browser APIs sufficient)
- Foundation-first phase ordering (infrastructure before UI prevents rewrites)
- localStorage is source of truth for dismissal (per-device, not per-user)
- InstallSettingsCard bypasses isDismissed (permanent fallback for users who dismissed banner)

**Issues Resolved:**
- None encountered during milestone

**Issues Deferred:**
- Service worker for PWA installability (enables beforeinstallprompt on Chromium) — captured as todo

**Technical Debt Incurred:**
- No service worker means Chromium beforeinstallprompt doesn't fire on desktop

---

*For current project status, see .planning/ROADMAP.md*

---
*Archived: 2026-01-31 as part of v1.4 milestone completion*
