# Requirements Archive: v1.5 Service Worker

**Archived:** 2026-02-01
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.5.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: HabitStreak v1.5 Service Worker

**Defined:** 2026-01-31
**Core Value:** Make every interaction feel rewarding.

## v1.5 Requirements

Requirements for service worker milestone. Each maps to roadmap phases.

### Service Worker Core

- [x] **SW-01**: Service worker is registered on app load
- [x] **SW-02**: Service worker includes fetch handler (enables Chromium install prompts)
- [x] **SW-03**: sw.js has Cache-Control headers preventing stale service worker

### App Shell Caching

- [x] **CACHE-01**: Static assets (JS, CSS) are cached for faster repeat loads
- [x] **CACHE-02**: PWA icons are cached
- [x] **CACHE-03**: API routes are excluded from caching (network-only)
- [x] **CACHE-04**: Cached assets use versioned cache names for clean updates

### Offline Experience

- [x] **OFFLINE-01**: Offline fallback page exists with Dutch message
- [x] **OFFLINE-02**: Offline page uses HabitStreak branding (glassmorphism, colors)
- [x] **OFFLINE-03**: Navigation requests show offline page when network unavailable

### Verification

- [x] **VERIFY-01**: beforeinstallprompt event fires on Chrome/Edge
- [x] **VERIFY-02**: Existing iOS walkthrough still works (no regression)
- [x] **VERIFY-03**: Lighthouse PWA audit passes
- [x] **VERIFY-04**: Production Docker build includes service worker

## Future Requirements

Deferred to later milestones.

### Notifications

- **NOTIF-01**: Push notification support
- **NOTIF-02**: Background sync for offline check-ins

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Offline data sync | HabitStreak requires network for check-ins; complexity not justified |
| Background sync | Low value for daily-use app; users check in when online |
| Push notifications | Separate feature, not related to installability |
| Update prompt UI | Silent updates simpler; new SW activates on next visit |
| Full offline mode | App data must be fresh; offline viewing adds cache invalidation complexity |

## Traceability

Which plans cover which requirements.

| Requirement | Phase | Plan | Status |
|-------------|-------|------|--------|
| SW-01 | 16 | 16-01 | Complete |
| SW-02 | 16 | 16-01 | Complete |
| SW-03 | 16 | 16-01 | Complete |
| CACHE-01 | 16 | 16-02 | Complete |
| CACHE-02 | 16 | 16-02 | Complete |
| CACHE-03 | 16 | 16-02 | Complete |
| CACHE-04 | 16 | 16-02 | Complete |
| OFFLINE-01 | 16 | 16-03 | Complete |
| OFFLINE-02 | 16 | 16-03 | Complete |
| OFFLINE-03 | 16 | 16-03 | Complete |
| VERIFY-01 | 16 | 16-04 | Complete |
| VERIFY-02 | 16 | 16-04 | Complete |
| VERIFY-03 | 16 | 16-04 | Complete |
| VERIFY-04 | 16 | 16-04 | Complete |

**Coverage:**
- v1.5 requirements: 14 total
- Mapped to phase 16: 14 (5 plans including gap closure)
- Unmapped: 0 ✓

---

## Milestone Summary

**Shipped:** 14 of 14 v1.5 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-01 as part of v1.5 milestone completion*
