---
phase: 02-animation-foundation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/tasks/today-task-item.tsx
  - src/app/globals.css
  - src/components/ui/page-transition.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Task completion does not cause visual blinking or artifacts"
    - "Task button shows subtle glow on hover (desktop)"
    - "Page transitions have noticeable slide-up movement"
  artifacts:
    - path: "src/components/tasks/today-task-item.tsx"
      provides: "Task item with smooth animations and hover glow"
    - path: "src/app/globals.css"
      provides: "Glow animation that doesn't conflict with shadow-sm"
    - path: "src/components/ui/page-transition.tsx"
      provides: "More pronounced slide-up effect"
  key_links:
    - from: "today-task-item.tsx"
      to: "globals.css"
      via: "animate-glow class"
      pattern: "animate-glow"
---

<objective>
Fix three UAT gaps in animation foundation: eliminate glow-blink artifact on task completion, add hover glow to task buttons, and increase page transition visibility.

Purpose: Close gaps identified during Phase 2 UAT testing to deliver polished animation experience.
Output: Fixed animations that pass all Phase 2 UAT tests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-animation-foundation/02-UAT.md

@src/components/tasks/today-task-item.tsx
@src/app/globals.css
@src/components/ui/page-transition.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix animate-glow box-shadow conflict</name>
  <files>src/app/globals.css, src/components/tasks/today-task-item.tsx</files>
  <action>
    The root cause: `transition-all duration-500` on the button transitions box-shadow. When `animate-glow` ends (at box-shadow: 0), the underlying `shadow-sm` from completed state suddenly becomes visible, and `transition-all` animates this appearance causing a visible blink.

    Fix approach: Exclude box-shadow from the transition. Change `transition-all` to explicitly list properties that should transition, excluding box-shadow which is handled by the glow animation.

    In today-task-item.tsx line 89:
    - Replace: `transition-all duration-500`
    - With: `transition-colors transition-transform duration-500` (or use a custom class)

    Alternative simpler fix: Keep transition-all but set the glow animation to end at the same shadow value as shadow-sm. However, this couples the animation to Tailwind's shadow-sm value which is fragile.

    Best fix: Replace `transition-all duration-500` with explicit properties:
    `transition-[background-color,border-color,transform,opacity] duration-500`

    This excludes box-shadow from transitions, letting the glow animation handle it cleanly.
  </action>
  <verify>
    1. Run dev server: `npm run dev`
    2. Navigate to /vandaag
    3. Check a task to complete it
    4. Watch for 2 seconds - no blinking/flashing should occur
    5. Uncheck the task - also no blinking
    6. Repeat 3x to confirm consistency
  </verify>
  <done>Task completion animation is smooth with no visible blink or flash artifact at any point during the animation sequence.</done>
</task>

<task type="auto">
  <name>Task 2: Add hover glow to task item button</name>
  <files>src/components/tasks/today-task-item.tsx</files>
  <action>
    The TodayTaskItem uses a plain `<button>` element instead of the `<Button>` component, so it doesn't get the hover glow effect defined in Button's default variant.

    Add the hover glow class to the button in today-task-item.tsx:
    - Add to existing classes: `hover:shadow-[0_0_15px_-3px_hsl(var(--primary)/0.4)]`

    This should be scoped to hover-capable devices to avoid sticky mobile hover states.
    The existing `task-item-hover` class already handles this scoping via `@media (hover: hover)`.

    Add the hover glow class alongside the existing hover classes on line 84-93.
    Place it before `active:scale-[0.98]` for logical grouping.
  </action>
  <verify>
    1. On desktop browser, hover over a task item
    2. Should see subtle glow shadow around the button (primary color at 40% opacity)
    3. On mobile (use DevTools device mode), tap and release - no sticky glow state
  </verify>
  <done>Task item buttons show subtle primary-colored glow on hover (desktop only), matching the Button component's hover behavior.</done>
</task>

<task type="auto">
  <name>Task 3: Increase page transition slide-up distance</name>
  <files>src/components/ui/page-transition.tsx</files>
  <action>
    Current `translate-y-2` (8px) is too subtle. Increase to `translate-y-4` (16px) for more noticeable movement.

    In page-transition.tsx line 22:
    - Replace: `translate-y-2`
    - With: `translate-y-4`

    This doubles the slide distance while keeping the animation smooth. If 16px feels too aggressive, `translate-y-3` (12px) is an alternative, but start with translate-y-4 as the UAT feedback indicated the effect was "barely noticeable."
  </action>
  <verify>
    1. Navigate from /vandaag to /inzichten
    2. Observe page content sliding up as it fades in
    3. Movement should be clearly visible (not subtle)
    4. Navigate back - same effect should occur
    5. Should still feel polished, not jarring
  </verify>
  <done>Page transitions show clearly visible slide-up movement that users notice during navigation.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Task completion has no blink/flash artifact (test 3x)
- [ ] Task hover shows glow on desktop
- [ ] Page transitions have noticeable slide effect
- [ ] Reduced motion still works (test in DevTools)
</verification>

<success_criteria>

- All three UAT gaps closed
- No new TypeScript or build errors
- Animations remain smooth (60fps)
- Reduced motion preference still respected
- All Phase 2 UAT tests would pass on re-test
</success_criteria>

<output>
After completion, create `.planning/phases/02-animation-foundation/02-04-SUMMARY.md`
</output>
