---
phase: 11-landing-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/page.tsx
  - src/app/(public)/page.tsx
  - src/app/(public)/layout.tsx
  - src/components/landing/hero-section.tsx
  - src/components/landing/phone-mockup.tsx
  - src/components/landing/feature-highlights.tsx
  - src/middleware.ts
  - public/images/app-preview.png
autonomous: false

must_haves:
  truths:
    - "Visitor at / sees landing page content (not redirected to login)"
    - "Visitor sees Dutch hero headline and CTA button"
    - "Visitor sees phone mockup showing app preview"
    - "Visitor sees feature highlight cards"
    - "Landing page is mobile-responsive"
  artifacts:
    - path: "src/app/(public)/page.tsx"
      provides: "Landing page route"
      min_lines: 30
    - path: "src/components/landing/hero-section.tsx"
      provides: "Hero with headline, subheadline, CTA"
      min_lines: 40
    - path: "src/components/landing/phone-mockup.tsx"
      provides: "Phone frame with app preview"
      min_lines: 25
    - path: "src/components/landing/feature-highlights.tsx"
      provides: "Feature cards grid"
      min_lines: 50
  key_links:
    - from: "src/app/(public)/page.tsx"
      to: "hero-section, phone-mockup, feature-highlights"
      via: "component imports"
      pattern: "import.*from.*landing"
    - from: "src/middleware.ts"
      to: "/ route"
      via: "matcher excludes root"
      pattern: "matcher.*\\|"
---

<objective>
Build landing page with hero section, phone mockup, feature highlights, and CTAs.

Purpose: Create an inviting entry experience that showcases HabitStreak's playful personality before users even log in.
Output: Complete landing page at `/` with glassmorphism design matching the app.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/10-pwa-icons/10-01-SUMMARY.md

# Existing patterns to follow:
@src/app/globals.css (glassmorphism classes: .glass, .glass-subtle, animations)
@src/components/backgrounds/animated-background.tsx (floating orbs pattern)
@src/app/(auth)/login/page.tsx (auth page styling pattern)
@src/app/(main)/vandaag/page.tsx (glass card usage pattern)
@src/components/ui/button.tsx (Button component)
@src/components/ui/card.tsx (Card components)
@src/middleware.ts (route protection config)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create landing page route with hero section</name>
  <files>
    src/app/page.tsx,
    src/app/(public)/page.tsx,
    src/app/(public)/layout.tsx,
    src/components/landing/hero-section.tsx,
    src/middleware.ts
  </files>
  <action>
    1. Update middleware.ts matcher to exclude root path `/` from auth protection:
       - Add `|^/$` to the negative lookahead in matcher regex
       - This allows unauthenticated access to landing page

    2. Create `src/app/(public)/layout.tsx`:
       - Simple layout wrapper (no BottomNav like (main))
       - Include ThemeProvider context (already in root layout)
       - Include AnimatedBackground component for floating orbs
       - Add `min-h-screen` for full viewport

    3. Create `src/components/landing/hero-section.tsx` (Client Component):
       - Dutch headline: "Bouw gewoontes die blijven hangen" (Build habits that stick)
       - Subheadline: "Track je dagelijkse taken, bouw streaks op, en maak van discipline een feestje."
       - Primary CTA button: "Aan de slag" linking to /signup
       - Secondary link: "Al een account? Inloggen" linking to /login
       - Use glassmorphism styling: glass-strong for hero card or glass for subtle
       - Center-aligned text, responsive sizing (text-4xl md:text-5xl for headline)
       - Animations: animate-fade-in on container, animate-slide-up on text elements

    4. Create `src/app/(public)/page.tsx`:
       - Server Component (no 'use client' needed for composition)
       - Import and render HeroSection, PhoneMockup (placeholder), FeatureHighlights (placeholder)
       - Use flex column layout with gap-16 md:gap-24 for sections
       - Add padding: p-4 md:p-8

    5. Update `src/app/page.tsx` (root):
       - Change from redirect logic to rendering the landing page
       - For authenticated users: can still show landing with "Ga naar app" CTA
       - OR: Keep redirect for authenticated users to /vandaag (simpler)
       - Decision: Keep redirect logic but add landing route group
       - Actually: Remove old page.tsx content, (public)/page.tsx becomes the landing
       - The root page.tsx should redirect authenticated users to /vandaag, unauthenticated to landing
       - Simplest: Make (public)/page.tsx the landing, update root to just render it or redirect based on auth

    Implementation note:
    - Root page.tsx: Check auth. If authenticated â†’ redirect /vandaag. If not â†’ render landing content
    - Use `getCurrentUser()` which returns null for unauthenticated
    - Import landing components directly in root page.tsx (simpler than route group for single page)
    - Don't use (public) route group - just update root page.tsx directly
  </action>
  <verify>
    - `npm run build` succeeds
    - Visit http://localhost:3000/ while logged out â†’ see landing page
    - Visit http://localhost:3000/ while logged in â†’ redirect to /vandaag
    - Hero section shows Dutch text and CTA buttons
  </verify>
  <done>
    Landing page accessible at `/` for unauthenticated users with hero section displaying Dutch headline, subheadline, and CTA buttons
  </done>
</task>

<task type="auto">
  <name>Task 2: Create phone mockup and feature highlights</name>
  <files>
    src/components/landing/phone-mockup.tsx,
    src/components/landing/feature-highlights.tsx,
    public/images/app-preview.png
  </files>
  <action>
    1. Create `src/components/landing/phone-mockup.tsx` (Client Component):
       - Phone frame design using CSS (rounded corners, notch, border)
       - Use gradient border or glass effect for frame
       - Inner content: Static image of Today view (app-preview.png)
       - Responsive: max-w-[280px] md:max-w-[320px]
       - Add subtle shadow and tilt effect (transform: perspective, rotateY slight)
       - Animation: animate-slide-up with delay
       - For the preview image: Create a placeholder initially, we'll capture a real screenshot

    2. Create app preview image:
       - Take screenshot of Today view (/vandaag) showing tasks with check states
       - Crop to phone screen dimensions (390x844 for iPhone 14 ratio)
       - Save to public/images/app-preview.png
       - If screenshot not possible, create a styled placeholder div showing:
         * "Vandaag" header
         * Progress bar
         * 2-3 task items (placeholder glass cards)
         * Use the actual component styling

    3. Create `src/components/landing/feature-highlights.tsx` (Client Component):
       - 4 feature cards in responsive grid: grid-cols-1 md:grid-cols-2 gap-4
       - Each card: glass styling, icon, Dutch title, description
       - Features to highlight:
         a. Dagelijkse tracking - "Vink je taken af met een voldaan gevoel"
            Icon: CheckCircle or similar
         b. Streak opbouwen - "Bouw een onbreekbare reeks op"
            Icon: Flame (use existing AnimatedFlame or simple emoji ðŸ”¥)
         c. Inzichten - "Bekijk je voortgang van de afgelopen week"
            Icon: BarChart or TrendingUp
         d. Mobiel-first - "Ontworpen voor onderweg, werkt overal"
            Icon: Smartphone
       - Use lucide-react icons (already in project)
       - Add staggered animation: each card has animate-slide-up with increasing delay

    4. Add secondary CTA below features:
       - "Klaar om te beginnen?" text
       - "Maak gratis account" button linking to /signup
       - Center aligned, add margin-top

    5. Update landing page (src/app/page.tsx) to include:
       - PhoneMockup positioned next to or below hero on mobile
       - FeatureHighlights section below
       - Footer with secondary CTA
  </action>
  <verify>
    - `npm run build` succeeds
    - Phone mockup displays with frame styling
    - 4 feature cards visible in responsive grid
    - Secondary CTA button at bottom works
    - Mobile view: single column layout
    - Desktop view: 2-column grid for features
  </verify>
  <done>
    Phone mockup component renders with app preview, 4 feature highlight cards display in responsive grid, secondary CTA at bottom
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete landing page with hero, phone mockup, features, and CTAs</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open incognito/private browser window (ensure logged out)
    3. Visit: http://localhost:3000/
    4. Verify hero section:
       - Dutch headline "Bouw gewoontes die blijven hangen" visible
       - Subheadline text visible
       - "Aan de slag" button visible and clickable (goes to /signup)
       - "Al een account? Inloggen" link visible (goes to /login)
    5. Verify phone mockup:
       - Phone frame visible with app preview inside
       - Looks like a mobile device
    6. Verify feature highlights:
       - 4 cards with icons and Dutch descriptions
       - Responsive: resize browser to mobile width, check single column
       - Desktop: check 2-column grid
    7. Verify secondary CTA at bottom:
       - "Maak gratis account" button visible
    8. Verify glassmorphism:
       - Cards have frosted glass effect
       - Animated background orbs floating
    9. Verify animations:
       - Content fades/slides in on page load
    10. Test logged-in redirect:
        - Log in to the app
        - Visit http://localhost:3000/
        - Should redirect to /vandaag (not show landing)
  </how-to-verify>
  <resume-signal>Type "approved" if landing page looks good, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Landing page accessible at `/` for logged-out users
- [ ] Authenticated users redirected to `/vandaag`
- [ ] Hero section displays Dutch headline, subheadline, CTAs
- [ ] Phone mockup displays with app preview
- [ ] 4 feature highlight cards in responsive grid
- [ ] Glassmorphism styling matches existing app aesthetic
- [ ] Animations work (fade-in, slide-up)
- [ ] Mobile responsive (single column on small screens)
- [ ] Human verification checkpoint passed
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Requirements satisfied: LAND-01 through LAND-07
- No TypeScript errors or build warnings
- Landing page provides compelling first impression
  </success_criteria>

<output>
After completion, create `.planning/phases/11-landing-page/11-01-SUMMARY.md`
</output>
