---
phase: 16-service-worker-offline-support
plan: 05
type: execute
wave: 1
depends_on: []
files_modified: [src/app/offline/page.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Retry button navigates user to home page when clicked"
    - "User sees app content after clicking retry when back online"
  artifacts:
    - path: "src/app/offline/page.tsx"
      provides: "Offline fallback with working retry"
      contains: "window.location.href = '/'"
  key_links:
    - from: "src/app/offline/page.tsx"
      to: "/"
      via: "window.location.href assignment"
      pattern: "window\\.location\\.href.*=.*'/'"
---

<objective>
Fix the retry button on the offline page to navigate to home instead of reloading.

Purpose: The current implementation uses window.location.reload() which just reloads /offline. When the user comes back online and clicks "Opnieuw proberen", they need to navigate to the app home page, not reload the offline page.

Output: Working retry button that takes users to the app when connectivity is restored.
</objective>

<execution_context>
@/home/pvdochtend/.claude/get-shit-done/workflows/execute-plan.md
@/home/pvdochtend/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix retry button navigation</name>
  <files>src/app/offline/page.tsx</files>
  <action>
    Change line 17 from:
    ```
    onClick={() => window.location.reload()}
    ```
    to:
    ```
    onClick={() => { window.location.href = '/' }}
    ```

    This navigates the user to the home page instead of reloading the /offline route.
  </action>
  <verify>
    1. Check the file contains window.location.href = '/'
    2. Run npm run build to verify no syntax errors
  </verify>
  <done>
    Retry button onClick handler navigates to '/' instead of reloading the current page.
  </done>
</task>

</tasks>

<verification>
- src/app/offline/page.tsx contains `window.location.href = '/'`
- Build succeeds without errors
</verification>

<success_criteria>
- Retry button navigates to home page instead of reloading /offline
- No build errors
</success_criteria>

<output>
After completion, create `.planning/phases/16-service-worker-offline-support/16-05-SUMMARY.md`
</output>
